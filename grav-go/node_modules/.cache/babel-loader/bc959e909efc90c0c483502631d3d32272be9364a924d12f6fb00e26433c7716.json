{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\fabia\\\\Dropbox\\\\PC\\\\Desktop\\\\GITHUB\\\\Semestre 6\\\\Grav-Go\\\\grav-go\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport './App.css';\nimport AuthOverlay from './components/AuthOverlay';\nimport Navbar from './components/Navbar';\nimport Hero from './components/Hero';\nimport Tracker from './components/Tracker';\nimport BalanceModal from './components/BalanceModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  // users and session persisted in localStorage to mirror the previous implementation\n  const [users, setUsers] = useState([]);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [balance, setBalance] = useState(8.5);\n  const [showBalanceModal, setShowBalanceModal] = useState(false);\n\n  // load users and session on mount\n  useEffect(() => {\n    try {\n      const u = JSON.parse(localStorage.getItem('gravgo_users') || 'null') || [];\n      if (!Array.isArray(u) || u.length === 0) {\n        const demo = {\n          name: 'Admin',\n          email: 'admin@ufm.edu',\n          password: 'admin',\n          balance: 20.00\n        };\n        localStorage.setItem('gravgo_users', JSON.stringify([demo]));\n        setUsers([demo]);\n      } else {\n        setUsers(u);\n      }\n    } catch (e) {\n      console.error(e);\n      setUsers([]);\n    }\n    try {\n      const su = JSON.parse(localStorage.getItem('gravgo_user') || 'null');\n      if (su) {\n        setCurrentUser(su);\n        setBalance(+(su.balance || 8.5));\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  }, []);\n\n  // handlers passed to components\n  const handleLogin = found => {\n    if (!found) return;\n    setCurrentUser(found);\n    setBalance(+(found.balance || balance));\n    localStorage.setItem('gravgo_user', JSON.stringify(found));\n  };\n  const handleRegister = newUser => {\n    const updated = [...users, newUser];\n    setUsers(updated);\n    localStorage.setItem('gravgo_users', JSON.stringify(updated));\n    // set session\n    setCurrentUser(newUser);\n    setBalance(+(newUser.balance || balance));\n    localStorage.setItem('gravgo_user', JSON.stringify(newUser));\n  };\n  const handleTopUp = amount => {\n    const newBal = +(balance + amount).toFixed(2);\n    setBalance(newBal);\n    // update user session and users list\n    if (currentUser) {\n      const updatedUser = {\n        ...currentUser,\n        balance: newBal\n      };\n      setCurrentUser(updatedUser);\n      localStorage.setItem('gravgo_user', JSON.stringify(updatedUser));\n      const updatedUsers = users.map(u => u.email === updatedUser.email ? updatedUser : u);\n      setUsers(updatedUsers);\n      localStorage.setItem('gravgo_users', JSON.stringify(updatedUsers));\n    }\n  };\n  const handlePay = amount => {\n    const newBal = +Math.max(0, balance - amount).toFixed(2);\n    setBalance(newBal);\n    if (currentUser) {\n      const updatedUser = {\n        ...currentUser,\n        balance: newBal\n      };\n      setCurrentUser(updatedUser);\n      localStorage.setItem('gravgo_user', JSON.stringify(updatedUser));\n      const updatedUsers = users.map(u => u.email === updatedUser.email ? updatedUser : u);\n      setUsers(updatedUsers);\n      localStorage.setItem('gravgo_users', JSON.stringify(updatedUsers));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App-root\",\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      onShowBalance: () => setShowBalanceModal(true),\n      currentUser: currentUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Hero, {\n      onShowBalance: () => setShowBalanceModal(true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      children: /*#__PURE__*/_jsxDEV(Tracker, {\n        userBalance: balance,\n        onTopUp: handleTopUp,\n        onPay: handlePay\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BalanceModal, {\n      visible: showBalanceModal,\n      balance: balance,\n      onTopUp: handleTopUp,\n      onClose: () => setShowBalanceModal(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AuthOverlay, {\n      visible: !currentUser,\n      users: users,\n      onLogin: handleLogin,\n      onRegister: handleRegister\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"R4KmFWwK7sY5agoOtHzomT+eYyE=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","AuthOverlay","Navbar","Hero","Tracker","BalanceModal","jsxDEV","_jsxDEV","App","_s","users","setUsers","currentUser","setCurrentUser","balance","setBalance","showBalanceModal","setShowBalanceModal","u","JSON","parse","localStorage","getItem","Array","isArray","length","demo","name","email","password","setItem","stringify","e","console","error","su","handleLogin","found","handleRegister","newUser","updated","handleTopUp","amount","newBal","toFixed","updatedUser","updatedUsers","map","handlePay","Math","max","className","children","onShowBalance","fileName","_jsxFileName","lineNumber","columnNumber","userBalance","onTopUp","onPay","visible","onClose","onLogin","onRegister","_c","$RefreshReg$"],"sources":["C:/Users/fabia/Dropbox/PC/Desktop/GITHUB/Semestre 6/Grav-Go/grav-go/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './App.css';\nimport AuthOverlay from './components/AuthOverlay';\nimport Navbar from './components/Navbar';\nimport Hero from './components/Hero';\nimport Tracker from './components/Tracker';\nimport BalanceModal from './components/BalanceModal';\n\nfunction App(){\n  // users and session persisted in localStorage to mirror the previous implementation\n  const [users, setUsers] = useState([]);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [balance, setBalance] = useState(8.5);\n  const [showBalanceModal, setShowBalanceModal] = useState(false);\n\n  // load users and session on mount\n  useEffect(()=>{\n    try{\n      const u = JSON.parse(localStorage.getItem('gravgo_users') || 'null') || [];\n      if(!Array.isArray(u) || u.length === 0){\n        const demo = { name: 'Admin', email: 'admin@ufm.edu', password: 'admin', balance: 20.00 };\n        localStorage.setItem('gravgo_users', JSON.stringify([demo]));\n        setUsers([demo]);\n      } else {\n        setUsers(u);\n      }\n    }catch(e){ console.error(e); setUsers([]); }\n\n    try{\n      const su = JSON.parse(localStorage.getItem('gravgo_user') || 'null');\n      if(su){\n        setCurrentUser(su);\n        setBalance(+(su.balance || 8.5));\n      }\n    }catch(e){ console.error(e); }\n  },[]);\n\n  // handlers passed to components\n  const handleLogin = (found) => {\n    if(!found) return;\n    setCurrentUser(found);\n    setBalance(+(found.balance || balance));\n    localStorage.setItem('gravgo_user', JSON.stringify(found));\n  }\n\n  const handleRegister = (newUser) => {\n    const updated = [...users, newUser];\n    setUsers(updated);\n    localStorage.setItem('gravgo_users', JSON.stringify(updated));\n    // set session\n    setCurrentUser(newUser);\n    setBalance(+(newUser.balance || balance));\n    localStorage.setItem('gravgo_user', JSON.stringify(newUser));\n  }\n\n  const handleTopUp = (amount) => {\n    const newBal = +(balance + amount).toFixed(2);\n    setBalance(newBal);\n    // update user session and users list\n    if(currentUser){\n      const updatedUser = { ...currentUser, balance: newBal };\n      setCurrentUser(updatedUser);\n      localStorage.setItem('gravgo_user', JSON.stringify(updatedUser));\n      const updatedUsers = users.map(u => u.email === updatedUser.email ? updatedUser : u);\n      setUsers(updatedUsers);\n      localStorage.setItem('gravgo_users', JSON.stringify(updatedUsers));\n    }\n  }\n\n  const handlePay = (amount) => {\n    const newBal = +(Math.max(0, balance - amount)).toFixed(2);\n    setBalance(newBal);\n    if(currentUser){\n      const updatedUser = { ...currentUser, balance: newBal };\n      setCurrentUser(updatedUser);\n      localStorage.setItem('gravgo_user', JSON.stringify(updatedUser));\n      const updatedUsers = users.map(u => u.email === updatedUser.email ? updatedUser : u);\n      setUsers(updatedUsers);\n      localStorage.setItem('gravgo_users', JSON.stringify(updatedUsers));\n    }\n  }\n\n  return (\n    <div className=\"App-root\">\n      <Navbar onShowBalance={() => setShowBalanceModal(true)} currentUser={currentUser} />\n      <Hero onShowBalance={() => setShowBalanceModal(true)} />\n\n      <main>\n        <Tracker userBalance={balance} onTopUp={handleTopUp} onPay={handlePay} />\n      </main>\n\n      <BalanceModal visible={showBalanceModal} balance={balance} onTopUp={handleTopUp} onClose={() => setShowBalanceModal(false)} />\n\n      <AuthOverlay visible={!currentUser} users={users} onLogin={handleLogin} onRegister={handleRegister} />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAO,WAAW;AAClB,OAAOC,WAAW,MAAM,0BAA0B;AAClD,OAAOC,MAAM,MAAM,qBAAqB;AACxC,OAAOC,IAAI,MAAM,mBAAmB;AACpC,OAAOC,OAAO,MAAM,sBAAsB;AAC1C,OAAOC,YAAY,MAAM,2BAA2B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErD,SAASC,GAAGA,CAAA,EAAE;EAAAC,EAAA;EACZ;EACA,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACY,WAAW,EAAEC,cAAc,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACc,OAAO,EAAEC,UAAU,CAAC,GAAGf,QAAQ,CAAC,GAAG,CAAC;EAC3C,MAAM,CAACgB,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;;EAE/D;EACAD,SAAS,CAAC,MAAI;IACZ,IAAG;MACD,MAAMmB,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,IAAI,MAAM,CAAC,IAAI,EAAE;MAC1E,IAAG,CAACC,KAAK,CAACC,OAAO,CAACN,CAAC,CAAC,IAAIA,CAAC,CAACO,MAAM,KAAK,CAAC,EAAC;QACrC,MAAMC,IAAI,GAAG;UAAEC,IAAI,EAAE,OAAO;UAAEC,KAAK,EAAE,eAAe;UAAEC,QAAQ,EAAE,OAAO;UAAEf,OAAO,EAAE;QAAM,CAAC;QACzFO,YAAY,CAACS,OAAO,CAAC,cAAc,EAAEX,IAAI,CAACY,SAAS,CAAC,CAACL,IAAI,CAAC,CAAC,CAAC;QAC5Df,QAAQ,CAAC,CAACe,IAAI,CAAC,CAAC;MAClB,CAAC,MAAM;QACLf,QAAQ,CAACO,CAAC,CAAC;MACb;IACF,CAAC,QAAMc,CAAC,EAAC;MAAEC,OAAO,CAACC,KAAK,CAACF,CAAC,CAAC;MAAErB,QAAQ,CAAC,EAAE,CAAC;IAAE;IAE3C,IAAG;MACD,MAAMwB,EAAE,GAAGhB,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,IAAI,MAAM,CAAC;MACpE,IAAGa,EAAE,EAAC;QACJtB,cAAc,CAACsB,EAAE,CAAC;QAClBpB,UAAU,CAAC,EAAEoB,EAAE,CAACrB,OAAO,IAAI,GAAG,CAAC,CAAC;MAClC;IACF,CAAC,QAAMkB,CAAC,EAAC;MAAEC,OAAO,CAACC,KAAK,CAACF,CAAC,CAAC;IAAE;EAC/B,CAAC,EAAC,EAAE,CAAC;;EAEL;EACA,MAAMI,WAAW,GAAIC,KAAK,IAAK;IAC7B,IAAG,CAACA,KAAK,EAAE;IACXxB,cAAc,CAACwB,KAAK,CAAC;IACrBtB,UAAU,CAAC,EAAEsB,KAAK,CAACvB,OAAO,IAAIA,OAAO,CAAC,CAAC;IACvCO,YAAY,CAACS,OAAO,CAAC,aAAa,EAAEX,IAAI,CAACY,SAAS,CAACM,KAAK,CAAC,CAAC;EAC5D,CAAC;EAED,MAAMC,cAAc,GAAIC,OAAO,IAAK;IAClC,MAAMC,OAAO,GAAG,CAAC,GAAG9B,KAAK,EAAE6B,OAAO,CAAC;IACnC5B,QAAQ,CAAC6B,OAAO,CAAC;IACjBnB,YAAY,CAACS,OAAO,CAAC,cAAc,EAAEX,IAAI,CAACY,SAAS,CAACS,OAAO,CAAC,CAAC;IAC7D;IACA3B,cAAc,CAAC0B,OAAO,CAAC;IACvBxB,UAAU,CAAC,EAAEwB,OAAO,CAACzB,OAAO,IAAIA,OAAO,CAAC,CAAC;IACzCO,YAAY,CAACS,OAAO,CAAC,aAAa,EAAEX,IAAI,CAACY,SAAS,CAACQ,OAAO,CAAC,CAAC;EAC9D,CAAC;EAED,MAAME,WAAW,GAAIC,MAAM,IAAK;IAC9B,MAAMC,MAAM,GAAG,CAAC,CAAC7B,OAAO,GAAG4B,MAAM,EAAEE,OAAO,CAAC,CAAC,CAAC;IAC7C7B,UAAU,CAAC4B,MAAM,CAAC;IAClB;IACA,IAAG/B,WAAW,EAAC;MACb,MAAMiC,WAAW,GAAG;QAAE,GAAGjC,WAAW;QAAEE,OAAO,EAAE6B;MAAO,CAAC;MACvD9B,cAAc,CAACgC,WAAW,CAAC;MAC3BxB,YAAY,CAACS,OAAO,CAAC,aAAa,EAAEX,IAAI,CAACY,SAAS,CAACc,WAAW,CAAC,CAAC;MAChE,MAAMC,YAAY,GAAGpC,KAAK,CAACqC,GAAG,CAAC7B,CAAC,IAAIA,CAAC,CAACU,KAAK,KAAKiB,WAAW,CAACjB,KAAK,GAAGiB,WAAW,GAAG3B,CAAC,CAAC;MACpFP,QAAQ,CAACmC,YAAY,CAAC;MACtBzB,YAAY,CAACS,OAAO,CAAC,cAAc,EAAEX,IAAI,CAACY,SAAS,CAACe,YAAY,CAAC,CAAC;IACpE;EACF,CAAC;EAED,MAAME,SAAS,GAAIN,MAAM,IAAK;IAC5B,MAAMC,MAAM,GAAG,CAAEM,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEpC,OAAO,GAAG4B,MAAM,CAAC,CAAEE,OAAO,CAAC,CAAC,CAAC;IAC1D7B,UAAU,CAAC4B,MAAM,CAAC;IAClB,IAAG/B,WAAW,EAAC;MACb,MAAMiC,WAAW,GAAG;QAAE,GAAGjC,WAAW;QAAEE,OAAO,EAAE6B;MAAO,CAAC;MACvD9B,cAAc,CAACgC,WAAW,CAAC;MAC3BxB,YAAY,CAACS,OAAO,CAAC,aAAa,EAAEX,IAAI,CAACY,SAAS,CAACc,WAAW,CAAC,CAAC;MAChE,MAAMC,YAAY,GAAGpC,KAAK,CAACqC,GAAG,CAAC7B,CAAC,IAAIA,CAAC,CAACU,KAAK,KAAKiB,WAAW,CAACjB,KAAK,GAAGiB,WAAW,GAAG3B,CAAC,CAAC;MACpFP,QAAQ,CAACmC,YAAY,CAAC;MACtBzB,YAAY,CAACS,OAAO,CAAC,cAAc,EAAEX,IAAI,CAACY,SAAS,CAACe,YAAY,CAAC,CAAC;IACpE;EACF,CAAC;EAED,oBACEvC,OAAA;IAAK4C,SAAS,EAAC,UAAU;IAAAC,QAAA,gBACvB7C,OAAA,CAACL,MAAM;MAACmD,aAAa,EAAEA,CAAA,KAAMpC,mBAAmB,CAAC,IAAI,CAAE;MAACL,WAAW,EAAEA;IAAY;MAAA0C,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACpFlD,OAAA,CAACJ,IAAI;MAACkD,aAAa,EAAEA,CAAA,KAAMpC,mBAAmB,CAAC,IAAI;IAAE;MAAAqC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAExDlD,OAAA;MAAA6C,QAAA,eACE7C,OAAA,CAACH,OAAO;QAACsD,WAAW,EAAE5C,OAAQ;QAAC6C,OAAO,EAAElB,WAAY;QAACmB,KAAK,EAAEZ;MAAU;QAAAM,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACrE,CAAC,eAEPlD,OAAA,CAACF,YAAY;MAACwD,OAAO,EAAE7C,gBAAiB;MAACF,OAAO,EAAEA,OAAQ;MAAC6C,OAAO,EAAElB,WAAY;MAACqB,OAAO,EAAEA,CAAA,KAAM7C,mBAAmB,CAAC,KAAK;IAAE;MAAAqC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAE9HlD,OAAA,CAACN,WAAW;MAAC4D,OAAO,EAAE,CAACjD,WAAY;MAACF,KAAK,EAAEA,KAAM;MAACqD,OAAO,EAAE3B,WAAY;MAAC4B,UAAU,EAAE1B;IAAe;MAAAgB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACnG,CAAC;AAEV;AAAChD,EAAA,CAxFQD,GAAG;AAAAyD,EAAA,GAAHzD,GAAG;AA0FZ,eAAeA,GAAG;AAAC,IAAAyD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}